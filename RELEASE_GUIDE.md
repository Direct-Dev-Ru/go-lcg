# üöÄ –ì–∞–π–¥ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ä–µ–ª–∏–∑–æ–≤ —Å –ø–æ–º–æ—â—å—é GoReleaser

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–æ–≤ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ `linux-command-gpt` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º GoReleaser.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ GoReleaser](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-goreleaser)
- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
- [–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞](#–ø—Ä–æ—Ü–µ—Å—Å-—Å–æ–∑–¥–∞–Ω–∏—è-—Ä–µ–ª–∏–∑–∞)
- [–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è](#–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)
- [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ GoReleaser

### Linux/macOS

```bash
# –°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –≤–µ—Ä—Å–∏—é
curl -sL https://git.io/goreleaser | bash

# –ò–ª–∏ —á–µ—Ä–µ–∑ Homebrew (macOS)
brew install goreleaser

# –ò–ª–∏ —á–µ—Ä–µ–∑ Go
go install github.com/goreleaser/goreleaser@latest
```

### Windows

```powershell
# –ß–µ—Ä–µ–∑ Chocolatey
choco install goreleaser

# –ò–ª–∏ —Å–∫–∞—á–∞—Ç—å —Å GitHub Releases
# https://github.com/goreleaser/goreleaser/releases
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –§–∞–π–ª `.goreleaser.yaml`

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GoReleaser:

```yaml
version: 2

before:
  hooks:
    - go mod tidy
    - go generate ./...

builds:
  - binary: lcg
    env:
      - CGO_ENABLED=0
    goarch:
      - amd64
      - arm64
      - arm
    goos:
      - linux
      - darwin

archives:
  - formats: [tar.gz]
    name_template: >-
      {{ .ProjectName }}_
      {{- title .Os }}_
      {{- if eq .Arch "amd64" }}x86_64
      {{- else if eq .Arch "386" }}i386
      {{- else }}{{ .Arch }}{{ end }}
      {{- if .Arm }}v{{ .Arm }}{{ end }}
    format_overrides:
      - goos: windows
        formats: [zip]

changelog:
  sort: asc
  filters:
    exclude:
      - "^docs:"
      - "^test:"

release:
  footer: >-
    ---
    Released by [GoReleaser](https://github.com/goreleaser/goreleaser).
```

### –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

- **builds**: –°–±–æ—Ä–∫–∞ –¥–ª—è Linux, macOS, Windows (amd64, arm64, arm)
- **archives**: –°–æ–∑–¥–∞–Ω–∏–µ –∞—Ä—Ö–∏–≤–æ–≤ tar.gz –¥–ª—è Unix –∏ zip –¥–ª—è Windows
- **changelog**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ changelog –∏–∑ git commits
- **release**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ GitHub —Ä–µ–ª–∏–∑–∞

## üöÄ –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã
git status

# –û–±–Ω–æ–≤–∏—Ç–µ –≤–µ—Ä—Å–∏—é –≤ VERSION.txt
echo "v2.0.2" > VERSION.txt

# –°–æ–∑–¥–∞–π—Ç–µ —Ç–µ–≥
git tag v2.0.2
git push origin v2.0.2
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ GitHub —Ç–æ–∫–µ–Ω
export GITHUB_TOKEN="your_github_token_here"

# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env
echo "GITHUB_TOKEN=your_github_token_here" > .env
```

### 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞

#### –ü–æ–ª–Ω—ã–π —Ä–µ–ª–∏–∑

```bash
# –°–æ–∑–¥–∞—Ç—å —Ä–µ–ª–∏–∑ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ GitHub
goreleaser release

# –°–æ–∑–¥–∞—Ç—å —Ä–µ–ª–∏–∑ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ (—Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ)
goreleaser release --clean
```

#### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–ª–∏–∑ (snapshot)

```bash
# –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å–±–æ—Ä–∫—É
goreleaser release --snapshot

# –¢–µ—Å—Ç–æ–≤–∞—è —Å–±–æ—Ä–∫–∞ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏
goreleaser release --snapshot --clean
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã GoReleaser —Å–æ–∑–¥–∞—Å—Ç:

- **–ê—Ä—Ö–∏–≤—ã**: `dist/` - –≥–æ—Ç–æ–≤—ã–µ –∞—Ä—Ö–∏–≤—ã –¥–ª—è –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
- **–ß–µ–∫—Å—É–º–º—ã**: `dist/checksums.txt` - –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Å—É–º–º—ã —Ñ–∞–π–ª–æ–≤
- **GitHub —Ä–µ–ª–∏–∑**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ä–µ–ª–∏–∑ –Ω–∞ GitHub

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### GitHub Actions

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.github/workflows/release.yml`:

```yaml
name: Release
on:
  push:
    tags:
      - 'v*'
jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - uses: actions/setup-go@v3
        with:
          go-version: '1.21'
      - name: Run GoReleaser
        uses: goreleaser/goreleaser-action@v4
        with:
          distribution: goreleaser
          version: latest
          args: release
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

### –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

–í –ø—Ä–æ–µ–∫—Ç–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:

```bash
# –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
./shell-code/pre-release.sh

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞
./shell-code/release.sh
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ª–∏–∑–∞

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `dist/` –±—É–¥—É—Ç —Å–æ–∑–¥–∞–Ω—ã:

```
dist/
‚îú‚îÄ‚îÄ artifacts.json          # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
‚îú‚îÄ‚îÄ CHANGELOG.md            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–π changelog
‚îú‚îÄ‚îÄ config.yaml             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è GoReleaser
‚îú‚îÄ‚îÄ digests.txt             # –•–µ—à–∏ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ go-lcg_2.0.1_checksums.txt
‚îú‚îÄ‚îÄ go-lcg_Darwin_arm64.tar.gz
‚îú‚îÄ‚îÄ go-lcg_Darwin_x86_64.tar.gz
‚îú‚îÄ‚îÄ go-lcg_Linux_arm64.tar.gz
‚îú‚îÄ‚îÄ go-lcg_Linux_i386.tar.gz
‚îú‚îÄ‚îÄ go-lcg_Linux_x86_64.tar.gz
‚îú‚îÄ‚îÄ go-lcg_Windows_arm64.zip
‚îú‚îÄ‚îÄ go-lcg_Windows_i386.zip
‚îú‚îÄ‚îÄ go-lcg_Windows_x86_64.zip
‚îî‚îÄ‚îÄ metadata.json           # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ä–µ–ª–∏–∑–∞
```

## üîç –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ GoReleaser

**–í–∞–∂–Ω–æ**: –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏—è—Ö GoReleaser —Ñ–ª–∞–≥ `--skip-publish` –±–æ–ª—å—à–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

- `--clean` - –æ—á–∏—â–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `dist/` –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π
- `--snapshot` - —Å–æ–∑–¥–∞–µ—Ç —Ç–µ—Å—Ç–æ–≤—É—é —Å–±–æ—Ä–∫—É –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–≥–∞
- `--debug` - –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- `--skip-validate` - –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

#### 1. –û—à–∏–±–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ GitHub

```
Error: failed to get GitHub token: missing github token
```

**–†–µ—à–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `GITHUB_TOKEN` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

#### 2. –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–≥–∞

```
Error: git tag v1.0.0 already exists
```

**–†–µ—à–µ–Ω–∏–µ**: –£–¥–∞–ª–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ–≥ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥—É—é –≤–µ—Ä—Å–∏—é.

#### 3. –û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏

```
Error: failed to build for linux/amd64
```

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
go build -o lcg .
```

### –û—Ç–ª–∞–¥–∫–∞

```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
goreleaser release --debug

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
goreleaser check

# –¢–æ–ª—å–∫–æ —Å–±–æ—Ä–∫–∞ –±–µ–∑ —Ä–µ–ª–∏–∑–∞
goreleaser build

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞)
goreleaser release --clean

# –°–æ–∑–¥–∞–Ω–∏–µ snapshot —Ä–µ–ª–∏–∑–∞ –±–µ–∑ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
goreleaser release --snapshot --clean
```

## üìù –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (SemVer)
- –û–±–Ω–æ–≤–ª—è–π—Ç–µ `VERSION.txt` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Ä–µ–ª–∏–∑–∞
- –°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ç–µ–≥–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `v1.0.0`

### 2. Changelog

- –ü–∏—à–∏—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ commit messages
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ conventional commits –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ changelog
- –ò—Å–∫–ª—é—á–∞–π—Ç–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫–æ–º–º–∏—Ç—ã –∏–∑ changelog

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ snapshot —Ä–µ–ª–∏–∑—ã –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω—ã–º —Ä–µ–ª–∏–∑–æ–º
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–±–æ—Ä–∫–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏–∑ —Ä–µ–ª–∏–∑–∞

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GitHub Secrets –¥–ª—è CI/CD
- –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞

## üéØ –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

```bash
# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
git checkout main
git pull origin main

# 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏
echo "v2.0.2" > VERSION.txt
git add VERSION.txt
git commit -m "chore: bump version to v2.0.2"

# 3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞
git tag v2.0.2
git push origin v2.0.2

# 4. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞
export GITHUB_TOKEN="your_token"
goreleaser release

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞
ls -la dist/
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è GoReleaser](https://goreleaser.com/)
- [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π](https://github.com/goreleaser/goreleaser/tree/main/examples)
- [GitHub Actions –¥–ª—è GoReleaser](https://github.com/goreleaser/goreleaser-action)

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ—Ç –≥–∞–π–¥ —Å–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ `linux-command-gpt`. –î–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
